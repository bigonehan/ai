# Codex 승인(yes) 자동화 설치 가이드

## 목표
Codex에서 반복적으로 뜨는 권한 승인 프롬프트를 최소화한다.
핵심은 "모든 명령 자동 허용"이 아니라, 안전한 명령 패턴별(prefix rule) 영구 허용이다.

## 원칙
- 전역 무차별 자동 승인은 금지한다.
- 자주 쓰는 비파괴 명령만 패턴 단위로 허용한다.
- 파괴적 명령(`rm`, `git reset --hard`, 시스템 설정 변경 등)은 수동 승인 유지한다.

## 적용 순서
1. 작업에서 반복되는 명령을 패턴으로 고정한다.
- 예: `bun install`, `bun run check-types`, `jj st`, `jj log -n 10`, `vitest`

2. Codex가 권한 요청 시 prefix rule을 저장한다.
- 동일 prefix 명령은 이후 승인 없이 실행된다.

3. 패턴이 달라지지 않도록 팀 공통 명령을 통일한다.
- 옵션/인자 형태가 자주 바뀌면 승인 요청이 다시 발생한다.

## 권장 prefix rule 예시
- `["bun", "install"]`
- `["bun", "run", "check-types"]`
- `["vitest"]`
- `["jj", "st"]`
- `["jj", "log", "-n"]`
- `["jj", "new", "-m"]`

## 운영 규칙
- 새 도구를 도입하면 먼저 최소 범위 prefix부터 허용한다.
- 광범위 prefix(`python`, `bash -lc` 전체 등)는 지양한다.
- 승인 이력은 주기적으로 점검해 과도한 권한을 정리한다.

## 한계
Codex 보안 게이트는 완전히 비활성화할 수 없다.
다만 prefix rule을 잘 설계하면 실사용에서 대부분의 승인 단계를 제거할 수 있다.
